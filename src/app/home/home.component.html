<div style="text-align:center">
  <h1>
    Welcome to {{ title }}!
  </h1>
  <div>
      <h2>Send files using WebRTC!</h2>
  </div>
  Your id is: 
  <mat-form-field class="id">
    <input matInput disabled type="text" name="id" id="id" [(ngModel)]="sendZeroService.id">
  </mat-form-field>
  <br>
  {{sendZeroService.connectionPrompt}}
  <br>
  <b>{{sendZeroService.prompt}}</b>
  <br>
  <div class="connectionBox">
    <mat-form-field>
      <input matInput placeholder="Peer ID" type="text" name="peerId" id="peerId" [(ngModel)]="sendZeroService.peerToConnectTo">
    </mat-form-field>
    &nbsp;
    <button mat-raised-button required color="primary" (click)="connectToPeer()" id="connectButton" name="connectButton" class="connectButton" [disabled]="sendZeroService.disableConnectButton || sendZeroService.peerId === '' ">
      Connect
    </button>
  </div>
  <div class="peerList" id="peerList" >
    <mat-select [(value)]="sendZeroService.selectedPeer" placeholder="Not connected to a peer">
      <mat-option *ngFor="let peerId of JSObject.keys(sendZeroService.peers)" [(value)]="sendZeroService.peers[peerId].id">{{sendZeroService.peers[peerId].id}}</mat-option>
    </mat-select>
  </div>
    <!-- <form [formGroup]="fileForm">
      <mat-form-field>
        <ngx-mat-file-input formControlName="selectFile" placeholder="Select File" valuePlaceholder="No file selected" value="file">
        </ngx-mat-file-input>
        <mat-icon matSuffix>folder</mat-icon>
      </mat-form-field>
      <button mat-raised-button color="primary" id="sendFileButton" name="sendFileButton" (click)="sendFile()" [disabled]="sendZeroService.disableSendButton" class="sendFileButton">Send File</button>
    </form> -->
  <div class="filePicker">
    <file-drop style="cursor: pointer; text-align: center" (click)="openFileInput()" headertext="{{file ? file.name + '&emsp;' +  (file.size | byteFormat) : 'Drag file here!'}}" (onFileDrop)="fileDropped($event)">
        <!-- <span>optional content (don't set headertext then)</span> -->
    </file-drop>
    <input type='file' style='visibility: hidden' (change)="fileChanged($event)" #fileInput>
    <br>  
    <button mat-raised-button color="primary" id="sendFileButton" name="sendFileButton" (click)="sendFile()" [disabled]="sendZeroService.disableSendButton" class="sendFileButton">Send File</button>
  </div>
  <!-- <table mat-table [dataSource]=”myDataArray” class="mat-elevation-z8">
    <ng-container matColumnDef="peerId">
      <th mat-header-cell *matHeaderCellDef> Peer ID </th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>  
  </table> -->
  <div *ngFor="let peerId of JSObject.keys(sendZeroService.peers)">
    <h3>{{peerId}}: {{sendZeroService.peers[peerId].prompt}}</h3>
    <div *ngFor="let file of sendZeroService.peers[peerId].files">
      <div class="receiveBox" id="receiveBox" *ngIf="file.maxFileChunks !== 0">
        <mat-progress-bar mode="determinate" [value]="file.receivedChunks*100/file.maxFileChunks">Progress</mat-progress-bar>
        <div *ngIf="file.fileReadyForDownload">
          <a target="_blank" [href]="file.url" [download]="file.name">Click here to download file {{file.name}}</a>
        </div>
      </div>
    </div>
  </div>
</div>